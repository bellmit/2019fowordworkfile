SELECT 
        YEAR(t1.reality_start_time) AS z_year -- 年份
       ,concat(YEAR(t1.reality_start_time),"Q",quarter(t1.reality_start_time)) AS z_quarter -- 季度  
       ,date_format(t1.reality_start_time, '%Y-%m') AS z_month -- 月份【例：201906】
       ,t1.reality_start_time 
       ,t1.realreleasetime
       ,t1.project_serial_num AS procode
       ,t1.ch_version
       ,t1.english_version
       ,t1.first_dept_id
       ,t1.first_dept
       ,t1.second_dept_id
       ,t1.second_dept
       ,t1.pro_type
       ,t1.current_milepost
       ,t1.scale_project
       ,SUM(ifnull(t2.workhour, 0)) workhour
       ,AVG(ifnull(t3.STANDARD, 0)) STANDARD
       ,AVG(ifnull(t3.asset_sub_rate, 0)) asset_sub_rate
       ,CASE
         WHEN date_format(realreleasetime, '%Y-%m') =
              date_format(SYSDATE(), '%Y-%m') THEN
          '1'
         ELSE
          ''
       END AS is_month
  FROM t_pro_setup_apply t1
  LEFT JOIN m_daily_work t2 ON t1.item_name = t2.projectid
  LEFT JOIN t_pro_quality_score t3 ON t1.id = t3.project_id
 WHERE t1.project_serial_num IS NOT NULL
   AND reality_start_time IS NOT NULL
 GROUP BY t1.reality_start_time
         ,t1.realreleasetime
         ,t1.project_serial_num
         ,t1.ch_version
         ,t1.english_version
         ,t1.first_dept_id
         ,t1.first_dept
         ,t1.second_dept_id
         ,t1.second_dept
         ,t1.pro_type
         ,t1.current_milepost
         ,t1.scale_project