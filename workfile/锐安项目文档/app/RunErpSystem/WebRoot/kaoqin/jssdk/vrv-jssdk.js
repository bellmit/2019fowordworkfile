var _createClass=function(){function l(e,t){for(var n=0;n<t.length;n++){var l=t[n];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Device=function(){function t(){_classCallCheck(this,t);var e=navigator.userAgent.toLowerCase();-1!=e.indexOf("imlinkdood")?(this.imlinkdood(),deviceType=-1!=e.indexOf("android")?1:2,deviceName=-1!=e.indexOf("android")?"android":"ios"):-1!=e.indexOf("qtwebengine")||-1!=e.indexOf("qtwebkit")?document.write("<script language='javascript' src='http://www.linkdood.cn/jssdk/url/QWebChannel.js'><\/script>"):-1!=e.indexOf("electron")&&(this.html5(),deviceType=5,deviceName="pc-h5")}return _createClass(t,[{key:"init",value:function(e){null!=e.debug&&(isDebug=e.debug)}},{key:"ready",value:function(e){null!=client?"function"==typeof e&&e.call(this):readyFn=e}},{key:"imlinkdood",value:function(){!function(e){if(window.WebViewJavascriptBridge)return e(WebViewJavascriptBridge);if(window.WVJBCallbacks)return window.WVJBCallbacks.push(e);window.WVJBCallbacks=[e];var t=document.createElement("iframe");t.style.display="none",t.src="wvjbscheme://__BRIDGE_LOADED__",document.documentElement.appendChild(t),setTimeout(function(){document.documentElement.removeChild(t)},0)}(function(e){client=e,readyFn&&readyFn.call(this)})}},{key:"html5",value:function(){var e=window.require("electron").remote.getGlobal("callByDDIOApp");console.log("callByDDIOApp",e),client=e,delete window.module,readyFn&&readyFn.call(this)}},{key:"registerMessageNotice",value:function(e){this._callByApp("registerMessageNotice",e)}},{key:"takePhoto",value:function(e){this._callByApp("takePhoto",e)}},{key:"getUnreadMessage",value:function(e){this._callByApp("getUnreadMessage",e)}},{key:"getAccountInfo",value:function(e){this._callByApp("getAccountInfo",e)}},{key:"sendMessage",value:function(e){this._callByApp("sendMessage",e)}},{key:"portraitUrl",value:function(e){this._callByApp("portraitUrl",e)}},{key:"getUserName",value:function(e){this._callByApp("getUserName",e)}},{key:"getContactList",value:function(e){this._callByApp("getContactList",e)}},{key:"getLocalFiles",value:function(e){e=vrv.util.addSize(e),this._callByApp("getLocalFiles",e)}},{key:"getGroupList",value:function(e){this._callByApp("getGroupList",e)}},{key:"getLocalPhotos",value:function(e){e=vrv.util.addSize(e),this._callByApp("getLocalPhotos",e)}},{key:"getPosition",value:function(e){this._callByApp("getPosition",e)}},{key:"showNavigationBar",value:function(e){this._callByApp("showNavigationBar",e)}},{key:"getInfoWithSweep",value:function(e){this._callByApp("getInfoWithSweep",e)}},{key:"getOrganization",value:function(e){this._callByApp("getOrganization",e)}},{key:"closeView",value:function(e){this._callByApp("closeView",e)}},{key:"getLanguage",value:function(e){this._callByApp("getLanguage",e)}},{key:"getVersionMark",value:function(e){this._callByApp("getVersionMark",e)}},{key:"copyTextToPaste",value:function(e){this._callByApp("copyTextToPaste",e)}},{key:"chatByUserID",value:function(e){this._callByApp("chatByUserID",e)}},{key:"openFileURL",value:function(e){this._callByApp("openFileURL",e)}},{key:"openImageURL",value:function(e){this._callByApp("openImageURL",e)}},{key:"getVersion",value:function(e){e.success({version:sdkVersion,platform:deviceName})}},{key:"openChat",value:function(e){this._callByApp("openChat",e)}},{key:"createGroup",value:function(e){this._callByApp("createGroup",e)}},{key:"transferGroup",value:function(e){this._callByApp("transferGroup",e)}},{key:"joinGroup",value:function(e){this._callByApp("joinGroup",e)}},{key:"inviteMembers",value:function(e){this._callByApp("inviteMembers",e)}},{key:"removeMembers",value:function(e){this._callByApp("removeMembers",e)}},{key:"getGroupMembers",value:function(e){this._callByApp("getGroupMembers",e)}},{key:"deleteGroup",value:function(e){this._callByApp("deleteGroup",e)}},{key:"openAudioCall",value:function(e){this._callByApp("openAudioCall",e)}},{key:"openVideoCall",value:function(e){this._callByApp("openVideoCall",e)}},{key:"openVideoCallVendor",value:function(e){this._callByApp("openVideoCallVendor",e)}},{key:"getOAuthCode",value:function(e){this._callByApp("getOAuthCode",e)}},{key:"getUserIdMap",value:function(e){this._callByApp("getUserIdMap",e)}},{key:"callPhone",value:function(e){this._callByApp("callPhone",e)}},{key:"scanQrCode",value:function(e){this._callByApp("scanQrCode",e)}},{key:"shareTo",value:function(e){this._callByApp("shareTo",e)}},{key:"downloadFile",value:function(e){this._callByApp("downloadFile",e)}},{key:"speech2Text",value:function(e){this._callByApp("speech2Text",e)}},{key:"openExternalUrl",value:function(e){this._callByApp("openExternalUrl",e)}},{key:"readNfc",value:function(e){this._callByApp("readNfc",e)}},{key:"_callByApp",value:function(t,e){if(null!=client)if(isDebug&&alert("jssdk 初始化成功"),null!=t){var n=e.success,l=function(e){isDebug&&alert(t+":"+JSON.stringify(e)),n(e)};1==deviceType||2==deviceType?"registerMessageNotice"==t||"registerNFCNotice"==t?client.registerHandler(t,l):("getAccountInfo"==t?t="getUserInfo":"getContactList"==t?t="getContacts":"getGroupList"==t&&(t="getGroupsInfo"),client.callHandler(t,e,l)):5==deviceType&&client[t](e)}else alert("调用方法名错误");else alert("请先初始化jssdk")}}]),t}(),deviceType=0,deviceName="",sdkVersion="2.1",client=null,readyFn=null,vrv=new Device;vrv.jssdk=vrv;