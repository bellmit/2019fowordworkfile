## cron

cron是一个linux下的定时执行工具，可以在无需人工干预的情况下运行作业。由于Cron 是Linux的内置服务，但它不自动起来，可以用以下的方法启动、关闭这个服务:

 

/sbin/service crond start //启动服务

 

/sbin/service crond stop //关闭服务

 

/sbin/service crond restart //重启服务

 

/sbin/service crond reload //重新载入配置

 
 

你也可以将这个服务在系统启动的时候自动启动:

 

　　在/etc/rc.d/rc.local这个脚本的末尾加上:

 

/sbin/service crond start

 

 

1、linux任务调度的工作主要分为以下两类：

   *系统执行的工作：系统周期性所要执行的工作，如备份系统数据、清理缓存

    *个人执行的工作：某个用户定期要做的工作，例如每隔10分钟检查邮件服务器是否有新信，这些工作可由每个用户自行设置。

 

2.crontab命令选项:

    -u指定一个用户,

    -l列出某个用户的任务计划,

    -r删除某个用户的任务,

    -e编辑某个用户的任务

 

3.cron文件语法:

          分     小时    日       月       星期      命令

        0-59   0-23   1-31   1-12     0-6     command     (取值范围,0表示周日一般一行对应一个任务)

 

4.记住几个特殊符号的含义:

        "*"代表取值范围内的数字,

        "/"代表"每",

        "-"代表从某个数字到某个数字,

        ","分开几个离散的数字

 

 

 

参数名称 含义 示例

-l 显示用户的Crontab文件的内容 crontabl –l

-i 删除用户的Crontab文件前给提示 crontabl -ri

-r 从Crontab目录中删除用户的Crontab文件 crontabl -r

-e 编辑用户的Crontab文件 crontabl -e

　　用户所建立的Crontab文件存于/var/spool/cron中，其文件名 与用户名一致。

　　它的格式共分为六段，前五段为时间设定段，第六段为所要执行的命令段，

　　格式如下：* * * * * <command>

　　其时间段的含义如表二：

　　段 含义 取值范围

　　第一段 代表分钟 0—59

　　第二段 代表小时 0—23

　　第三段 代表日期 1—31

　　第四段 代表月份 1—12

　　第五段 代表星期几，0代表星期日 0—6

　　例：如果用户的Crontab文件的内容是：29 19 * * * echo its dinner time，则系统每天的19:29显示‘its dinner time’

 

 

 

下面看看看几个具体的例子：

● 0 */2 * * * /sbin/service httpd restart 意思是每两个小时重启一次apache

● 50 7 * * * /sbin/service sshd start 意思是每天7：50开启ssh服务

● 50 22 * * * /sbin/service sshd stop 意思是每天22：50关闭ssh服务

● 0 0 1,15 * * fsck /home 每月1号和15号检查/home 磁盘

● 1 * * * * /home/bruce/backup 每小时的第一分执行 /home/bruce/backup这个文件

● 00 03 * * 1-5 find /home "*.xxx" -mtime 4 -exec rm {} \; 每周一至周五3点钟，在目录/home中，查找文件名为*.xxx的文件，并删除4天前的文件。

● 30 6 */10 * * ls 意思是每月的1、11、21、31日是的6：30执行一次ls命令

 

 

 

 

大概的设置流程

/sbin/service crond start

crontab -e

编辑执行的命令行

:wq 保存退出

完成！