<div style="height:50px">
    <img src="logo.jpg" alt="logo" align="right" style="height:50px">
</div>

# 工银投资项目待解决问题
- [工银投资项目待解决问题](#%E5%B7%A5%E9%93%B6%E6%8A%95%E8%B5%84%E9%A1%B9%E7%9B%AE%E5%BE%85%E8%A7%A3%E5%86%B3%E9%97%AE%E9%A2%98)
  - [数据质量](#%E6%95%B0%E6%8D%AE%E8%B4%A8%E9%87%8F)
  - [缺失信息](#%E7%BC%BA%E5%A4%B1%E4%BF%A1%E6%81%AF)
  - [数据规范](#%E6%95%B0%E6%8D%AE%E8%A7%84%E8%8C%83)
  - [逻辑](#%E9%80%BB%E8%BE%91)
  - [实现](#%E5%AE%9E%E7%8E%B0)

## 数据质量
No|问题说明|YN
:--:|:--|:--
1|`tasset_guaranteecontract`表中字段重复，重复字段为`disposalmony`,`guaranteecontractno`|是
2|`tasset_pawn_info`中字段重复，重复字段为`currentbalance`,`deductionten`,`lasttimeloss`,<br>`lastbalance`,`disposalmoney`,`recoverablebalance`|是
3|`trepay_confirm`中字段重复，重复字段为`associated_asset_id`|是
4|文档中丢失`tasset_loanaccount`表的相关资料|是
5|3.7的csv文件中 `securty_position_his` 中，按照文档部分数值的类型为小数点后8位，<br> csv中的文件导入时出现长度不够用的情况,是否修改类型位 `number` 类型|否
6|3.7版本的数据，数据大量重复，详情参照邮件，已给出相关重复问题信息|否
7|3.7版本的数据中 `asset_creditorcontract`表数据中顺序与文档不一致|否
8|3.7版本中 `asset_guaranteecontract`表中，第五列中的某条数据超出限制长度|否
9|3.7版本中 `backinfo`，`customer`及`invest_contract`表中时间格式错误|否
10|`project_info`在clob字段中，需要去掉clob中的`"`,否则出现冲突无法使用|否



> **备注:** <br>
> 1. 2问题中字段重复的问题是给的数据字典及csv文件中都重复了此列<br>
> 2. 3.7的问题处理结果一需要为一个全量数据的tar文件包，管会需要测试所写shell<br>脚本是否正确执行，及是否有遗漏

## 缺失信息
No|问题说明|YN
:--:|:--|:--
1|3.7的文件中缺失`despositsloansdeal`,`investplandetail`,`paymentreceipt`,`repodeal`, <br> `securitydeal`,`securityissuance`,`securitymaster`,`securityrateadjust`,`securityyield`|否
2|相关业务的码表缺失|是
> **备注:** <br>
> 1. 数据文件有可能是当期未生成，日期为3.7的数据现缺失这些表(其中基金部分修改后修改了3表的表结构，<br>且更换了具体的表，具体情况请参考相关文档)<br>
> 2. 码表的数据
## 数据规范
No|问题说明|YN
:--:|:--|:--
1|3.7 数据规范问题主要集中在csv文件的命名中，按照规范使用驼峰命名法|否
> **备注:** <br>
> 1. csv文件文件名的命名规范为 yyyyMMdd_tablename.csv,若出现需要会计期间的，则为 yyyyMMdd_tablename_period.csv,总账按此规则给数。但在核心之前要求修改时出现了一些困难，故就按照当时的表名换成驼峰命名法进行继续开发。（表名是小写）
 
## 逻辑
No|问题说明|YN
:--:|:--|:--
1|无法确定原始留债的逻辑（重组债权的逻辑可能也会因此发生变化）|否
2|基金部分的逻辑尚不清晰（原始留债等）|否
3|业务类型号在收债转股，重组债权及降准资金中无法得到|否
4|起息日期在原始债权及重组债权中存在争议|否
5|账面金额在收债转股及重组债权发股还债中存在争议|否
6|到期日中原始债权并未给出如何取值|否
7|收益率调整方式购买国债及发行金融债券字段待确定|否
8|首次收益率调整日在原始债权，重组债权，发行金融债券中待确定|否
9|收益率调整周期和收益率调整周期单位在发行金融债券中待确定|否
10|资金回收方式及还款金额在原始债权和重组债权中有争议|否
11|约定收益回收日在原始债权和重组债权中有尚未明确的部分|否
12|年初至今累计投资收益-股利分红和年初至今累计顾问业务费业务收入中收债转股<br>和发股还债有部分待确定|否
13|年初至今累计管理费业务收支在收债转股和发股还债中尚无|否
14|年初至今累计利息收支在原始债权，存放同业和债券逆回购中有问题及争议|否
15|年初至今累计投资收益-退出溢价在收债转股和发股还债中尚无|否
16|本金科目号等8项与财务系统对接后提供逻辑尚无|否
## 实现
No|问题说明|YN
:--:|:--|:--
1|将全部核心的表导入到src贴源层|基本完成,缺失验证
2|将全部贴源层的数据导入到std标准层|基本完成,缺失验证
3|将std标准层数据转化处理成想要的数据|否
> **备注:** <br>
> 1. 1问题中的脚本及控制文件基本写完，查漏补缺需要正确集成数据支持<br>
> 2. 2问题中所涉及的存储过程基本完成，需要验证及修改<br>
> 3. 3问题中，处理总账的数据的存储过程已完成，但核心和基金的数据有不少逻辑问题，推进较为困难





